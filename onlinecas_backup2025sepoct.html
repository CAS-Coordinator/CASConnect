<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online CAS Explorer (Japan, Sep-Oct 2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Neutrals (bg-stone-100, text-gray-800) with Autumnal Orange Accents (e.g., accent bg-orange-600, text-orange-700) -->
    <!-- Application Structure Plan: A streamlined single-page application. The structure includes: 1. A concise Introduction section explaining the tool's purpose. 2. A central "Activity Finder" with filters for CAS Strand, Location Focus, Cost, and Month, plus sorting options. Activities are displayed as cards opening a detailed modal. 3. A "Strategic Insights" section with collapsible accordions for key advice. 4. A footer with a disclaimer. This task-focused design prioritizes finding opportunities while keeping strategic advice accessible. -->
    <!-- Visualization & Content Choices: Report Info: Curated tables and analysis from the "CAS Online Navigator" report. Goal: Enable students to explore and find relevant online CAS opportunities for Sep/Oct 2025. Presentation Method: An interactive list of cards, with a modal for full details. Interaction: Filters and sorting powered by Alpine.js. Justification: This card-based, filterable interface is highly effective for navigating a list of diverse items. Accordions for text-heavy sections prevent UI clutter. No charts are used to ensure stability and focus on the core data. No SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link { transition: color 0.3s ease, border-bottom-color 0.3s ease; }
        .nav-link.active { border-bottom-color: #EA580C; color: #EA580C; } /* Orange */
        .modal { display: none; }
        .modal.active { display: flex; }
        .tag { display: inline-block; padding: 0.25rem 0.75rem; font-size: 0.8rem; border-radius: 9999px; margin-right: 0.5rem; margin-bottom: 0.5rem; font-weight: 500; }
        .tag-creativity { background-color: #FEF3C7; color: #92400E; border: 1px solid #FBBF24; }
        .tag-activity { background-color: #E0E7FF; color: #3730A3; border: 1px solid #A5B4FC; }
        .tag-service { background-color: #D1FAE5; color: #065F46; border: 1px solid #6EE7B7; }
        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .modal-content::-webkit-scrollbar-thumb { background: #EA580C; border-radius: 10px; }
        .modal-content::-webkit-scrollbar-thumb:hover { background: #C2410C; }
        [x-cloak] { display: none !important; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    </style>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-stone-100 text-gray-800" x-data="casAppOnlineSeptOct()">
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-orange-700">Online CAS Explorer (Sep-Oct)</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" @click="setActiveSection('home')" :class="{ 'active': activeSection === 'home' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-orange-600 border-b-2 border-transparent hover:border-orange-600">Home</a>
                        <a href="#find-activities" @click="setActiveSection('find-activities')" :class="{ 'active': activeSection === 'find-activities' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-orange-600 border-b-2 border-transparent hover:border-orange-600">Find Activities</a>
                        <a href="#insights" @click="setActiveSection('insights')" :class="{ 'active': activeSection === 'insights' }" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-orange-600 border-b-2 border-transparent hover:border-orange-600">Strategic Insights</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" type="button" class="bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-orange-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-orange-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" x-show="!mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="h-6 w-6" x-show="mobileMenuOpen" x-cloak xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </nav>
        <div x-show="mobileMenuOpen" x-cloak class="md:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" @click="setActiveSection('home'); mobileMenuOpen = false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-gray-50">Home</a>
                <a href="#find-activities" @click="setActiveSection('find-activities'); mobileMenuOpen = false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-gray-50">Find Activities</a>
                <a href="#insights" @click="setActiveSection('insights'); mobileMenuOpen = false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-gray-50">Strategic Insights</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <section id="home" class="py-8 md:py-12 bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-bold text-orange-700 mb-4">The CAS Online Navigator (Sep-Oct 2025)</h2>
            <p class="text-lg text-gray-700 mb-3">This tool provides a curated set of online CAS opportunities for IB students in Japan, focusing on <strong class="text-orange-600">September and October 2025</strong>. Online CAS expands the definition of community, allowing you to engage with global issues, contribute to international research, and develop digital skills from home.</p>
            <p class="text-gray-600">The opportunities here have been selected for their alignment with CAS learning outcomes, potential for meaningful reflection, and accessibility from Japan. Use this explorer to find activities that match your passions and build a compelling, evidence-based CAS program.</p>
        </section>

        <section id="find-activities" class="py-8 md:py-12 bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Find Online CAS Activities</h2>
            
            <div class="mb-8 p-4 border border-orange-200 rounded-lg bg-orange-50">
                <p class="text-sm text-orange-700">Use the filters to discover online CAS activities. Click on a card for more details and for tailored reflection prompts to help with your CAS portfolio.</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 items-end">
                <div>
                    <label for="filter-strand-online" class="block text-sm font-medium text-gray-700 mb-1">CAS Strand</label>
                    <select id="filter-strand-online" x-model="filters.strand" @change="applyFilters" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                        <option value="">All Strands</option>
                        <option value="Creativity">Creativity</option>
                        <option value="Activity">Activity</option>
                        <option value="Service">Service</option>
                    </select>
                </div>
                <div>
                    <label for="filter-location-focus-online" class="block text-sm font-medium text-gray-700 mb-1">Location Focus</label>
                    <select id="filter-location-focus-online" x-model="filters.locationFocus" @change="applyFilters" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                        <option value="">All Focus</option>
                        <option value="Japan Focus">Japan Focus</option>
                        <option value="Global">Global</option>
                    </select>
                </div>
                <div>
                    <label for="filter-cost-online" class="block text-sm font-medium text-gray-700 mb-1">Cost</label>
                    <select id="filter-cost-online" x-model="filters.cost" @change="applyFilters" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                        <option value="">All Costs</option>
                        <option value="Free">Free</option>
                        <option value="Paid">Paid</option>
                    </select>
                </div>
                 <div>
                    <label for="filter-month-online" class="block text-sm font-medium text-gray-700 mb-1">Month Availability</label>
                    <select id="filter-month-online" x-model="filters.month" @change="applyFilters" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                        <option value="">Any Month</option>
                        <option value="September">September</option>
                        <option value="October">October</option>
                        <option value="Ongoing">Ongoing</option>
                    </select>
                </div>
            </div>
             <div class="mb-6">
                <label for="sort-by-online" class="block text-sm font-medium text-gray-700 mb-1">Sort By</label>
                <select id="sort-by-online" x-model="sortBy" @change="sortActivities" class="w-full md:w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                    <option value="name">Activity Name (A-Z)</option>
                    <option value="organization">Organization (A-Z)</option>
                    <option value="strand">CAS Strand</option>
                </select>
            </div>
            
            <div x-show="filteredActivities.length === 0" class="text-center py-10 text-gray-500">
                <p class="text-xl">No online activities match your current filters.</p>
                <p>Try adjusting your search criteria.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <template x-for="activity in pagedActivities" :key="activity.id">
                    <div @click="openModal(activity)" class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 cursor-pointer overflow-hidden flex flex-col">
                        <div class="p-5 flex-grow">
                            <h3 class="text-lg font-semibold text-orange-700 mb-2" x-text="activity.name"></h3>
                            <p class="text-sm text-gray-600 mb-1"><strong class="font-medium">🏢 Org:</strong> <span x-text="activity.organization"></span></p>
                            <p class="text-sm text-gray-600 mb-3"><strong class="font-medium">📅 Deadline:</strong> <span x-text="activity.deadline"></span></p>
                            <div class="mb-2">
                                <template x-for="strand in activity.strands" :key="strand">
                                    <span :class="{
                                        'tag-creativity': strand === 'Creativity',
                                        'tag-activity': strand === 'Activity',
                                        'tag-service': strand === 'Service'
                                    }" class="tag" x-text="strand"></span>
                                </template>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-3 text-right">
                            <span class="text-sm text-orange-600 font-medium">View Details &rarr;</span>
                        </div>
                    </div>
                </template>
            </div>

            <div x-show="totalPages > 1" class="mt-8 flex justify-center items-center space-x-2">
                <button @click="prevPage" :disabled="currentPage === 1" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed">&laquo; Prev</button>
                <template x-for="page in pageNumbers" :key="page">
                    <button @click="goToPage(page)" :class="{'bg-orange-600 text-white': currentPage === page, 'bg-gray-200 text-gray-700 hover:bg-gray-300': currentPage !== page}" class="px-4 py-2 rounded-md" x-text="page"></button>
                </template>
                <button @click="nextPage" :disabled="currentPage === totalPages" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed">Next &raquo;</button>
            </div>
        </section>

        <div x-show="selectedActivity" class="modal fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 z-50" :class="{'active': selectedActivity !== null}" @click.self="closeModal" x-cloak>
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
                <div class="flex justify-between items-center p-4 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-orange-700" x-text="selectedActivity?.name"></h3>
                    <button @click="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl leading-none">&times;</button>
                </div>
                <div class="p-6 overflow-y-auto modal-content flex-grow text-sm">
                    <p class="mb-3"><strong class="font-semibold text-gray-800">Organization:</strong> <span x-text="selectedActivity?.organization" class="text-gray-700"></span></p>
                    <p class="mb-3"><strong class="font-semibold text-gray-800">Description & Tasks:</strong> <span x-html="selectedActivity?.description" class="text-gray-700"></span></p>
                    <p class="mb-2"><strong class="font-semibold text-gray-800">📅 Relevant Dates:</strong> <span x-text="selectedActivity?.dates" class="text-gray-700"></span></p>
                    <div class="mb-3">
                        <strong class="font-semibold text-gray-800">CAS Strand(s):</strong>
                        <div>
                            <template x-for="strand in selectedActivity?.strands" :key="strand">
                                <span :class="{
                                    'tag-creativity': strand === 'Creativity',
                                    'tag-activity': strand === 'Activity',
                                    'tag-service': strand === 'Service'
                                }" class="tag" x-text="strand"></span>
                            </template>
                        </div>
                    </div>
                    <p class="mb-2"><strong class="font-semibold text-gray-800">💰 Estimated Cost:</strong> <span x-text="selectedActivity?.cost" class="text-gray-700"></span></p>
                    <p class="mb-2"><strong class="font-semibold text-gray-800">🔗 Application/URL & Deadline:</strong> <span x-html="formatContact(selectedActivity?.urlDeadline)" class="text-gray-700 break-all"></span></p>
                    <div class="mt-4 pt-3 border-t">
                        <h4 class="font-semibold text-gray-800 mb-2">Expert Insight: CAS Reflection Prompts</h4>
                        <div class="text-gray-600 text-xs space-y-2" x-html="selectedActivity?.reflectionPrompts"></div>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-200 text-right">
                    <button @click="closeModal" class="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700">Close</button>
                </div>
            </div>
        </div>

        <section id="insights" class="py-8 md:py-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Strategic Insights for Online CAS</h2>
            <div class="space-y-4 max-w-3xl mx-auto">
                <div x-data="{ open: false }" class="bg-white p-4 rounded-lg shadow">
                    <button @click="open = !open" class="flex justify-between items-center w-full text-left">
                        <h3 class="text-lg font-semibold text-orange-700">The Rise of "Service as Learning"</h3>
                        <svg :class="{'rotate-180': open, '': !open}" class="w-5 h-5 text-orange-600 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div x-show="open" class="accordion-content mt-2 text-gray-600 text-sm" style="max-height: 0px;">
                        <p>Notice the trend of structured, sometimes fee-based, online service programs like those from NPO LOOB JAPAN. These are curated educational courses with a service component. The fee is an investment in a high-quality, verifiable experience that delivers clear learning outcomes, especially "engagement with issues of global significance." This reframes the cost as a strategic choice for a well-supported and impactful CAS project.</p>
                    </div>
                </div>
                <div x-data="{ open: false }" class="bg-white p-4 rounded-lg shadow">
                    <button @click="open = !open" class="flex justify-between items-center w-full text-left">
                        <h3 class="text-lg font-semibold text-orange-700">Using Sep/Oct as a Launchpad for Long-Term Projects</h3>
                        <svg :class="{'rotate-180': open, '': !open}" class="w-5 h-5 text-orange-600 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div x-show="open" class="accordion-content mt-2 text-gray-600 text-sm" style="max-height: 0px;">
                        <p>The IB values "commitment and perseverance." Many high-impact programs like Ashinaga Ikueikai or VOT require a 6+ month commitment. A strategic approach is to use September or October to start such a program. This transforms this timeframe from a boundary into a starting point for a major, portfolio-defining CAS project that powerfully demonstrates one of the most valued learning outcomes.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8 text-center">
        <div class="container mx-auto px-4">
            <p class="text-sm mb-2">&copy; 2025 Online CAS Explorer. Information from "The CAS Online Navigator" report.</p>
            <p class="text-xs text-gray-400"><strong>Disclaimer:</strong> All activity details are subject to change. Please verify all information directly with organizers before making plans.</p>
        </div>
    </footer>

<script>
function casAppOnlineSeptOct() {
    return {
        activeSection: 'home',
        mobileMenuOpen: false,
        activities: [],
        filteredActivities: [],
        selectedActivity: null,
        filters: { strand: '', locationFocus: '', cost: '', month: '' },
        sortBy: 'name',
        itemsPerPage: 12,
        currentPage: 1,

        init() {
            this.loadActivities(); 
            this.$nextTick(() => {
                this.applyFilters();
                const observerOptions = { root: null, rootMargin: '0px', threshold: 0.4 };
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) { this.activeSection = entry.target.id; }
                    });
                }, observerOptions);
                document.querySelectorAll('main section').forEach(section => observer.observe(section));
            
                window.addEventListener('hashchange', () => {
                    const hash = window.location.hash.substring(1);
                    if (hash) this.setActiveSection(hash);
                });
                if (window.location.hash) { this.setActiveSection(window.location.hash.substring(1)); } 
                else { this.setActiveSection('home'); }
            });
        },

        setActiveSection(sectionId) {
            this.activeSection = sectionId;
            const element = document.getElementById(sectionId);
            if (element) {
                const headerOffset = document.querySelector('header').offsetHeight;
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 10; 
                window.scrollTo({ top: offsetPosition, behavior: "smooth" });
            }
        },

        loadActivities() {
            this.activities = [
                // SERVICE
                { id: 'os1', name: 'SDGs Academia Online Learning', organization: 'NPO LOOB JAPAN', dates: 'Sep 24 - Oct 1; Oct 22 - Oct 29', deadline: 'Check site', locationFocus: 'Global', cost: 'Paid', strands: ['Service', 'Creativity'], primaryStrandSort: 'Service', description: 'Learn about SDGs and interact with Filipino youth in English via an online program. A certificate is issued upon completion.', urlDeadline: 'Visit activo.jp and search for NPO LOOB JAPAN.', reflectionPrompts: 'How did interacting with youth from another country change your perspective on a specific SDG? What were the challenges of cross-cultural communication online, and how did you overcome them?' },
                { id: 'os2', name: 'VOT (voices of tomorrow)', organization: 'VOT', dates: 'Long-term (6+ months), can start anytime', deadline: 'Ongoing', locationFocus: 'Global', cost: 'Free', strands: ['Service'], primaryStrandSort: 'Service', description: 'Join a long-term, remote program for high school students focused on social issues.', urlDeadline: 'Visit activo.jp and search for VOT.', reflectionPrompts: 'As a long-term project, how have you demonstrated commitment and perseverance? What specific skills have you developed over the first two months of your involvement?' },
                { id: 'os3', name: 'Ashinaga Learning Support', organization: 'Ashinaga Ikueikai', dates: 'Long-term (6+ months), can start anytime', deadline: 'Ongoing', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Service'], primaryStrandSort: 'Service', description: 'Provide weekly online learning support to high school students who have lost a parent or whose parent has a disability.', urlDeadline: 'Visit activo.jp and search for Ashinaga.', reflectionPrompts: 'What ethical considerations did you face when tutoring a peer? How did you adapt your communication style to be effective in an online-only teaching environment?' },
                { id: 'os4', name: 'Planet Hunters TESS', organization: 'Zooniverse / University of Oxford', dates: 'Ongoing', deadline: 'Ongoing', locationFocus: 'Global', cost: 'Free', strands: ['Service'], primaryStrandSort: 'Service', description: 'Analyze light curve data from the TESS satellite to help astronomers identify potential exoplanets.', urlDeadline: 'https://www.zooniverse.org/projects/nora-dot-eisner/planet-hunters-tess', reflectionPrompts: 'How does your contribution fit into the larger scientific process of discovering and verifying a planet? Reflect on the balance between human pattern recognition and computer algorithms in this type of research.' },
                { id: 'os5', name: 'Stall Catchers', organization: 'SciStarter / Cornell University', dates: 'Ongoing', deadline: 'Ongoing', locationFocus: 'Global', cost: 'Free', strands: ['Service'], primaryStrandSort: 'Service', description: 'Play an online game to analyze videos of blood vessels in mouse brains, helping to accelerate Alzheimer\'s research.', urlDeadline: 'https://scistarter.org/stall-catchers-by-eyesonalz', reflectionPrompts: 'Analyze the use of "gamification" in this project. How did the points and leaderboard systems affect your motivation and the quality of your work? What are the ethical implications of using a game to conduct serious medical research?' },
                // CREATIVITY
                { id: 'oc1', name: 'High School Fashion Design Drawing Contest', organization: 'Bunka Fashion College', dates: 'Submission period ends Sep 4', deadline: 'Sep 4, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity'], primaryStrandSort: 'Creativity', description: 'Submit an A4-sized fashion design drawing based on the theme: "Clothes I want to dress that person I admire."', urlDeadline: 'https://www.bunka-fc.ac.jp/kokosei-contest/', reflectionPrompts: 'Document your creative process from initial sketch to final illustration. What inspired your design? What new drawing or coloring techniques did you have to learn?' },
                { id: 'oc2', name: 'All-Japan High School Essay Contest', organization: 'Takushoku University', dates: 'Submission period ends Sep 8', deadline: 'Sep 8, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity', 'Service'], primaryStrandSort: 'Creativity', description: 'Write a 4-5 page essay on themes like "My Cross-Cultural Exchange Experience" or "Social Contribution I Can Make."', urlDeadline: 'https://www.takushoku-u.ac.jp/summary/sakubun2025.html', reflectionPrompts: 'How did you structure your argument to be persuasive? Reflect on how the process of writing the essay clarified your own thoughts on your chosen topic of global significance.' },
                { id: 'oc3', name: 'JSEC (Japan Science & Engineering Challenge)', organization: 'The Asahi Shimbun', dates: 'Submission period ends Sep 29', deadline: 'Sep 29, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity', 'Service'], primaryStrandSort: 'Creativity', description: 'Submit an original research project in one of 21 science, tech, and math categories.', urlDeadline: 'https://manabu.asahi.com/jsec/', reflectionPrompts: 'This is a major project. How did you plan your research timeline to meet the deadline? What was the most significant unexpected result or challenge in your research, and how did it change your project\'s direction?' },
                { id: 'oc4', name: 'High School Programming Contest', organization: 'Teikyo University', dates: 'Submission period ends Sep 30', deadline: 'Sep 30, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity'], primaryStrandSort: 'Creativity', description: 'Submit an original program on any theme. No restrictions on programming language or development environment.', urlDeadline: 'https://www.teikyo-u.ac.jp/event/2025/0801', reflectionPrompts: 'Describe the problem-solving process for the most difficult bug you encountered. Why did you choose your specific programming language for this project? What are its strengths and weaknesses?' },
                { id: 'oc5', name: 'CLT DESIGN AWARD 2025', organization: 'Japan CLT Association', dates: 'Submission period ends Oct 15', deadline: 'Oct 15, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity', 'Service'], primaryStrandSort: 'Creativity', description: 'Submit a design proposal for collective housing for the elderly, using Cross Laminated Timber (CLT).', urlDeadline: 'Search for "CLT DESIGN AWARD 2025" on univ-journal.jp/contest-top/', reflectionPrompts: 'How does your design address the specific social needs of an aging population? What research did you conduct on sustainable materials (CLT) to inform your creative choices?' },
                { id: 'oc6', name: '"Inaka Ryoku Koshien" Contest', organization: 'Fukuchiyama Public University', dates: 'Submission period ends Oct 17', deadline: 'Oct 17, 2025', locationFocus: 'Japan Focus', cost: 'Free', strands: ['Creativity', 'Service'], primaryStrandSort: 'Creativity', description: 'Propose a creative solution for regional revitalization in Japan, addressing issues like declining birthrates.', urlDeadline: 'Search for "Inaka Ryoku Koshien" on univ-journal.jp/contest-top/', reflectionPrompts: 'This project combines creativity and service. How did you research the real-world problem you chose to address? How does your proposed solution demonstrate innovative thinking?' },
                // ACTIVITY
                { id: 'oa1', name: 'RUN as ONE - GLOBAL Virtual Run (5th)', organization: 'Tokyo Marathon Foundation', dates: 'Sep 20 - Sep 28', deadline: 'Check site', locationFocus: 'Global', cost: 'Paid', strands: ['Activity'], primaryStrandSort: 'Activity', description: 'Complete a half marathon (21.0975 km) over the 9-day event period. Distance can be completed in multiple segments.', urlDeadline: 'https://tmf-virtualrun.jp/en/', reflectionPrompts: 'Create a training plan for the weeks leading up to the event. Use your running app\'s data (pace, distance, heart rate) to analyze your performance. How did your physical and mental state change over the training period?' },
                { id: 'oa2', name: 'RUN as ONE - GLOBAL Virtual Run (6th)', organization: 'Tokyo Marathon Foundation', dates: 'Oct 18 - Oct 26', deadline: 'Check site', locationFocus: 'Global', cost: 'Paid', strands: ['Activity'], primaryStrandSort: 'Activity', description: 'Complete a half marathon (21.0975 km) over the 9-day event period. A second opportunity to tackle the distance.', urlDeadline: 'https://tmf-virtualrun.jp/en/', reflectionPrompts: 'If you also did the 5th Challenge, compare your performance data. What did you learn from the first event that you applied to your training and execution for the second?' },
                { id: 'oa3', name: 'Pink Ribbon Walk & Run 2025', organization: 'RUNNET', dates: 'Sep 23 - Nov 2', deadline: 'Check site', locationFocus: 'Global', cost: 'Paid', strands: ['Activity', 'Service'], primaryStrandSort: 'Activity', description: 'Participate in a virtual walk/run (1 km, 10 km, or 45 km) to support breast cancer awareness.', urlDeadline: 'Search for "Pink Ribbon Walk & Run" on runnet.jp', reflectionPrompts: 'This event has a clear service component. In addition to your physical activity, what did you learn about the cause it supports? How does connecting physical activity to a social cause affect your motivation?' }
            ];
            this.activities = this.activities.map((activity, index) => ({ ...activity, id: activity.id || `act-${index}` }));
        },

        applyFilters() {
            this.currentPage = 1;
            let tempActivities = this.activities;
            if (this.filters.strand) { tempActivities = tempActivities.filter(act => act.strands.includes(this.filters.strand)); }
            if (this.filters.locationFocus) { tempActivities = tempActivities.filter(act => act.locationFocus === this.filters.locationFocus); }
            if (this.filters.cost) { tempActivities = tempActivities.filter(act => act.cost === this.filters.cost); }
            if (this.filters.month) {
                const monthLower = this.filters.month.toLowerCase();
                tempActivities = tempActivities.filter(act => act.dates.toLowerCase().includes(monthLower));
            }
            this.filteredActivities = tempActivities;
            this.sortActivities();
        },
        
        sortActivities() {
            let sorted = [...this.filteredActivities];
            if (this.sortBy === 'name') { sorted.sort((a, b) => a.name.localeCompare(b.name)); } 
            else if (this.sortBy === 'organization') { sorted.sort((a, b) => a.organization.localeCompare(b.organization)); } 
            else if (this.sortBy === 'strand') { sorted.sort((a,b) => a.primaryStrandSort.localeCompare(b.primaryStrandSort)); }
            this.filteredActivities = sorted;
        },
        
        get pagedActivities() {
            const start = (this.currentPage - 1) * this.itemsPerPage;
            const end = start + this.itemsPerPage;
            return this.filteredActivities.slice(start, end);
        },

        get totalPages() { return Math.ceil(this.filteredActivities.length / this.itemsPerPage); },
        
        get pageNumbers() {
            const numbers = [];
            const maxPagesToShow = 5;
            let startPage = Math.max(1, this.currentPage - Math.floor(maxPagesToShow / 2));
            let endPage = Math.min(this.totalPages, startPage + maxPagesToShow - 1);
            if (endPage - startPage + 1 < maxPagesToShow) { startPage = Math.max(1, endPage - maxPagesToShow + 1); }
            if (this.totalPages > 0 && endPage === 0) { numbers.push(1); } 
            else { for (let i = startPage; i <= endPage; i++) { numbers.push(i); } }
            return numbers;
        },

        nextPage() { if (this.currentPage < this.totalPages) this.currentPage++; },
        prevPage() { if (this.currentPage > 1) this.currentPage--; },
        goToPage(pageNumber) { this.currentPage = pageNumber; },
        openModal(activity) { this.selectedActivity = activity; },
        closeModal() { this.selectedActivity = null; },

        formatContact(contactInfo) {
            if (!contactInfo) return 'N/A';
            const urlRegex = /(https?:\/\/[^\s"<>]+)/g;
            const emailRegex = /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/g;
            let formatted = contactInfo;
            formatted = formatted.replace(urlRegex, (url) => {
                let cleanUrl = url.endsWith('.') ? url.slice(0, -1) : url;
                return `<a href="${cleanUrl}" target="_blank" class="text-orange-600 hover:underline">${cleanUrl}</a>` + (url.endsWith('.') ? '.' : '');
            });
            formatted = formatted.replace(emailRegex, '<a href="mailto:$1" class="text-orange-600 hover:underline">$1</a>');
            return formatted;
        }
    };
}
</script>
</body>
</html>
